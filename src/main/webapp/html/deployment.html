<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>
    <title>已部署的流程</title>
</head>
<body>
<center><h1 style="color: #b9393f;">已部署的流程</h1></center>
<hr/>
<center>
    <table border="3" cellpadding="0">
        <tr>
            <td>部署Id</td>
            <td>部署名字</td>
            <td>部署时间</td>
            <td>操作</td>
        </tr>
        <tr th:each="model, gStat: ${modelList}">
            <td th:text="${model.id}"></td>
            <td th:text="${model.name}"></td>
            <td th:text="${model.deploymentTime}"></td>
            <td>
                <a th:href="@{/operator/suspendDeployment/{id}(id=${model.id})}">挂起</a>
                <a th:href="@{/operator/activeDeployment/{id}(id=${model.id})}">激活</a>
                <a th:href="@{/operator/deleteDeployment/{id}(id=${model.id})}">删除</a>
                <a th:href="@{/operator/getBpmn/{id}(id=${model.id})}">查看BPMN图</a>
            </td>
        </tr>
    </table>
</center>
</body>
</html>
<script type="text/javascript" src="http://libs.baidu.com/jquery/1.9.0/jquery.js"></script>
<script>
    $("#digram").click(function () {
        // 获取modelId 传入显示
        $("#add").show();
        $.ajax({
            url: "/getModelId",
            type: "GET",
            async: false,
            dataType: "json",
            contentType: "application/json",
            success: function (msg) {
                console.log(msg.msg);
                $("#modelId").text(msg.msg);
            }
        });
    });
    /** 增 */
    $("#play").click(function () {
        var name = $("#name").val();
        var key = $("#key").val();
        var modelId = $("#modelId").text();
        var modelVO = {};
        modelVO.name = name;
        modelVO.key = key;
        modelVO.modelId = modelId;
        $.ajax({
            url: "/createModel",
            type: "POST",
            async: false,
            dataType: "json",
            contentType: "application/json",
            data: JSON.stringify(modelVO),
            success: function (msg) {
                // window.location.href= "editor?modeId=" + modelId;
                $("#play").attr("href", "editor?modelId=" + modelId);
            }
        });
    });
</script>